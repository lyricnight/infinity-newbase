package club.lyric.infinity.impl.modules.exploit;

import club.lyric.infinity.api.event.bus.EventHandler;
import club.lyric.infinity.api.module.Category;
import club.lyric.infinity.api.module.ModuleBase;
import club.lyric.infinity.impl.events.network.PacketEvent;
import net.minecraft.network.packet.BrandCustomPayload;
import net.minecraft.network.packet.CustomPayload;
import net.minecraft.network.packet.c2s.common.CustomPayloadC2SPacket;
import net.minecraft.util.Identifier;

/**
 * @author vasler
 */
public final class FakeBrand extends ModuleBase {
    public FakeBrand() {
        super("FakeBrand", "Spoofs your client to make the server believe your in vanilla.", Category.Exploit);
    }

    @EventHandler(priority = 500)
    public void onPacketSend(PacketEvent.Send event) {

        if (event.getPacket() instanceof CustomPayloadC2SPacket customPayloadC2SPacket) {

            CustomPayload packet = customPayloadC2SPacket.payload();
            Identifier identifier = packet.id();

            if (identifier.getPath().equals("brand")) {
                send(new CustomPayloadC2SPacket(new BrandCustomPayload("vanilla")));
            }
        }

    }
}
