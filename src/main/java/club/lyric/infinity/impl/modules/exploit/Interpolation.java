package club.lyric.infinity.impl.modules.exploit;

import club.lyric.infinity.api.event.bus.EventHandler;
import club.lyric.infinity.api.module.Category;
import club.lyric.infinity.api.module.ModuleBase;
import club.lyric.infinity.api.util.client.nulls.Null;
import club.lyric.infinity.impl.events.render.InterpolationEvent;

/**
 * @author lyric
 */
public final class Interpolation extends ModuleBase {
    public Interpolation() {
        super("Interpolation", "Resolves server-side player positions and overrides client-side rendering.", Category.EXPLOIT);
    }

    @SuppressWarnings("unused")
    @EventHandler
    public void onInterpolation(InterpolationEvent event) {
        event.getEntity().setPos(event.getX(), event.getY(), event.getZ());
        event.getEntity().setPitch(event.getXRot());
        event.getEntity().setYaw(event.getYRot());
    }

    @Override
    public String moduleInformation() {
        if (Null.is()) return "";
        return String.valueOf(mc.world.getPlayers().stream().filter(abstractClientPlayerEntity -> abstractClientPlayerEntity.isInRange(mc.player, 128)).toList().size());
    }
}
