package club.lyric.infinity.impl.modules.exploit;

import club.lyric.infinity.api.event.bus.EventHandler;
import club.lyric.infinity.api.module.Category;
import club.lyric.infinity.api.module.ModuleBase;
import club.lyric.infinity.api.setting.settings.BooleanSetting;
import club.lyric.infinity.impl.events.network.PacketEvent;
import net.minecraft.network.packet.s2c.common.ResourcePackSendS2CPacket;

/**
 * @author lyric
 */
public class KickPrevent extends ModuleBase {
    public BooleanSetting packs = new BooleanSetting("Packs", false, this);

    public KickPrevent() {
        super("KickPrevent", "Handles and tries to prevent exceptions in the network stack.", Category.Exploit);
    }

    @EventHandler(priority = Integer.MIN_VALUE)
    public void onPacketReceive(PacketEvent.Receive event) {
        if (event.getPacket() instanceof ResourcePackSendS2CPacket && packs.value()) {
            event.setCancelled(true);
        }
    }

}
