package club.lyric.infinity.impl.modules.exploit;

import club.lyric.infinity.api.module.Category;
import club.lyric.infinity.api.module.ModuleBase;
import net.minecraft.util.Hand;
import net.minecraft.util.hit.BlockHitResult;
import net.minecraft.util.hit.EntityHitResult;

public class MultiTask extends ModuleBase
{

    public MultiTask()
    {
        super("MultiTask", "Allows you to do two things at once.", Category.Exploit);
    }

    @Override
    public void onTickPre()
    {
        if (mc.crosshairTarget instanceof BlockHitResult crossHair &&
                crossHair.getBlockPos() != null &&
                mc.options.attackKey.isPressed() &&
                !mc.world.getBlockState(crossHair.getBlockPos()).isAir()
        )
        {
            mc.interactionManager.attackBlock(crossHair.getBlockPos(), crossHair.getSide());
            mc.player.swingHand(Hand.MAIN_HAND);
        }

        if (mc.crosshairTarget instanceof EntityHitResult ehr &&
                ehr.getEntity() != null &&
                mc.options.attackKey.isPressed() &&
                mc.player.getAttackCooldownProgress(0.5f) > 0.6f
        )
        {
            mc.interactionManager.attackEntity(mc.player, ehr.getEntity());
            mc.player.swingHand(Hand.MAIN_HAND);
        }
    }
}
